<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ARCardápio - Planos</title>

  <!-- Fonte + CSS do site -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/index.css" />

  <!-- Garantias mínimas para o overlay do modal -->
  <style>
    /* Mostra o modal como overlay clicável */
    .modal {
      position: fixed;
      inset: 0;
      display: none;                /* hidden por padrão */
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,.6);
      z-index: 999;
    }
    .modal:not(.hidden) { display: flex; }  /* quando remove .hidden, mostra */

    /* Apenas por segurança, evita que o conteúdo “engula” o clique do overlay */
    .modal-content {
      position: relative;
    }
  </style>
</head>

<body>
<!-- ======= Topo ======= -->
<header class="site-header">
  <h1>ARCardápio</h1>
  <button id="abrirModal" class="btn-acesso" type="button">Área do cliente</button>
</header>

<!-- SEÇÃO: MÉTRICAS -->
<section class="sobre" id="metricas">
  <h2>Aumente suas vendas em Até 30%</h2>
  <p style="margin-bottom:18px">
    Nosso dashboard mostra, em tempo real, <strong>itens mais vistos</strong>, <strong>horários de pico</strong>,
    <strong>tempo de permanência</strong> e muito mais. Com esses dados, você entende o comportamento
    do cliente e pode alcançar <strong>até 30% de crescimento</strong>.
  </p>

  <p style="font-weight:700;margin-bottom:22px">
    Encante seus clientes com um cardápio interativo e modelos 3D realistas — experiência que vende mais.
  </p>

  <div class="metricas-grid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;text-align:left">
    <article class="metricas-card" style="background:rgba(0,0,0,.45);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:16px">
      <h3 style="margin:0 0 8px 0">Horário de Pico</h3>
      <p style="margin:0">Descubra quando o público compra mais e ajuste promoções e equipe.</p>
    </article>

    <article class="metricas-card" style="background:rgba(0,0,0,.45);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:16px">
      <h3 style="margin:0 0 8px 0">Tempo no Cardápio</h3>
      <p style="margin:0">Entenda onde o cliente hesita e otimize imagens, preços e combos.</p>
    </article>

    <article class="metricas-card" style="background:rgba(0,0,0,.45);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:16px">
      <h3 style="margin:0 0 8px 0">Botão “Info”</h3>
      <p style="margin:0">Meça curiosidade e gere confiança com informaçoes e descrição diferenciada.</p>
    </article>
  </div>
</section>

<!-- ======= Seção: Sobre ======= -->
<section class="sobre">
  <h2>O que é o ARCardápio?</h2>
  <p>
    O ARCardápio é uma solução inovadora para restaurantes e bares que permite apresentar os pratos em 3D usando
    realidade aumentada. Com ele, seus clientes têm uma experiência imersiva ao visualizar os alimentos
    diretamente pelo celular.
  </p>
</section>

<!-- ======= Seção: Planos ======= -->
<h2>Escolha seu plano ideal</h2>
<section class="planos">

  <div class="plano">
    <h3>Teste (1 Semana)</h3>
    <p class="preco">R$ 10,00</p>
    <button type="button" onclick="window.location.href='html/cadastro.html'">Cadastre-se</button>
  </div>

  <div class="plano">
    <h3>Plus (1 Mês)</h3>
    <p class="preco">R$ 200,00</p>
    <button type="button" onclick="window.location.href='html/cadastro.html'">Cadastre-se</button>
  </div>

  <div class="plano">
    <h3>Pro (1 Ano)</h3>
    <p class="preco">R$ 2.200,00</p>
    <button type="button" onclick="window.location.href='html/cadastro.html'">Cadastre-se</button>
  </div>

  <div class="plano">
    <h3>Ultra (5 Anos)</h3>
    <p class="preco">R$ 12.500,00</p>
    <button type="button" onclick="window.location.href='html/cadastro.html'">Cadastre-se</button>
  </div>
</section>

<!-- ======= Seção: Contato ======= -->
<section class="contato">
  <div class="container-form">
    <span class="subtitulo-form">Vem para <strong>ARCardápio</strong></span>
    <h2>Entre em contato conosco</h2>

    <!-- ✅ IMPORTANTE:
         - action + method aqui garantem que MESMO se o JS não rodar,
           o envio vai pro FormSubmit e NÃO vaza na URL do seu site. -->
    <form id="form-contato"
          method="POST"
          action="https://formsubmit.co/arcardapio@gmail.com"
          novalidate>

      <!-- ✅ extras do FormSubmit (fallback) -->
      <input type="hidden" name="_subject" value="Novo contato — ARCardápio">
      <input type="hidden" name="_captcha" value="false">
      <input type="hidden" name="_template" value="table">
      <!-- honeypot anti-bot -->
      <input type="text" name="_honey" style="display:none">

      <!-- ✅ Se o JS falhar e cair no fallback (sem AJAX), volta pra sua página
           com um parâmetro inocente (sem dados pessoais). -->
      <input type="hidden" name="_next" value="https://arcardapio.com.br/?sent=1#contato">

      <div id="mensagem-sucesso" style="display:none; color:#00ffc8; margin-top:20px; font-weight:700;">
        Mensagem enviada com sucesso! Entraremos em contato em breve.
      </div>

      <div class="linha">
        <input type="text"  name="nome"  placeholder="Nome" required />
        <input type="email" name="email" placeholder="Email" required />
      </div>

      <div class="linha">
        <input type="tel" name="telefone" placeholder="Telefone" required />
        <select name="setor" required>
          <option value="">Setor da empresa</option>
          <option value="Restaurantes e Lanchonetes">Restaurantes e Lanchonetes</option>
          <option value="Padarias">Padarias</option>
          <option value="Cafeterias">Cafeterias</option>
          <option value="Outro">Outro</option>
        </select>
      </div>

      <textarea name="observacoes" placeholder="Observações"></textarea>

      <button type="submit" class="btn-atendimento">SOLICITAR ATENDIMENTO</button>
    </form>
  </div>
</section>

<!-- ======= Modal: Área do Cliente (sem botão X) ======= -->
<div id="modal" class="modal hidden" aria-hidden="true" role="dialog" aria-labelledby="titulo-modal">
  <div class="modal-content" role="document" aria-modal="true">
    <h2 id="titulo-modal" class="titulo-modal">Área do cliente</h2>
    <p class="texto-modal">Para acessar, clique em Acessar. Se ainda não tem conta, clique em Criar cadastro.</p>

    <div class="botao-video">
      <button type="button" onclick="window.location.href='html/login.html'">Acessar</button>
      <video autoplay loop muted playsinline class="video-fundo-botao">
        <source src="videos/botao-index.mp4" type="video/mp4" />
      </video>
    </div>

    <div class="botao-video">
      <button type="button" onclick="window.location.href='html/cadastro.html'">Criar cadastro</button>
      <video autoplay loop muted playsinline class="video-fundo-botao">
        <source src="videos/botao-index.mp4" type="video/mp4" />
      </video>
    </div>
  </div>
</div>

<!-- BOTÃO FIXO DO WHATSAPP -->
<a href="https://wa.me/83987687638?text=Ol%C3%A1%2C%20quero%20saber%20mais%20sobre%20o%20ARCard%C3%A1pio!"
  class="whatsapp-fixo" target="_blank" rel="noopener">
  <div class="whatsapp-conteudo">
    <img src="imagens/whatsapp.png" alt="WhatsApp" class="whatsapp-icon" />
    <span class="whatsapp-texto">Fale agora!</span>
  </div>
</a>

<!-- ======= Rodapé + links legais ======= -->
<footer class="site-footer">
  <div class="footer-inner">
    <span>© <span id="yr"></span> ARCardápio — Todos os direitos reservados</span>
    <span class="sep">|</span>
    <a href="/html/privacidade.html">Política de Privacidade</a>
    <span class="sep">|</span>
    <a href="/html/termos.html">Termos de Uso</a>
  </div>
</footer>

<!-- Banner simples de cookies (LGPD) -->
<div id="cookie-banner" class="cookie-banner" hidden>
  Utilizamos cookies essenciais para funcionamento e métricas agregadas.
  <a href="/html/privacidade.html#cookies">Saiba mais</a>.
  <button id="cookie-accept" type="button">Ok, entendi</button>
</div>

<!-- ======= Scripts ======= -->
<script>
  // ✅ Se alguém cair em uma URL antiga com dados na querystring, isso limpa na hora (só “esconde”).
  // Não é a segurança final, mas resolve o “problema visual” pro usuário.
  (function() {
    if (location.search && location.search.length > 1) {
      // mantém somente parâmetros inocentes (ex: sent=1)
      const params = new URLSearchParams(location.search);
      const safe = new URLSearchParams();
      if (params.has('sent')) safe.set('sent', params.get('sent'));
      const newUrl = location.pathname + (safe.toString() ? `?${safe.toString()}` : '') + location.hash;
      history.replaceState({}, document.title, newUrl);
    }
  })();

  // ano dinâmico no rodapé
  document.getElementById('yr').textContent = new Date().getFullYear();

  // banner de cookies
  (function(){
    const KEY = 'arcardapio_cookie_consent_v1';
    const banner = document.getElementById('cookie-banner');
    if (!localStorage.getItem(KEY)) banner.hidden = false;
    document.getElementById('cookie-accept')?.addEventListener('click', () => {
      localStorage.setItem(KEY, 'yes');
      banner.hidden = true;
    });
  })();

  // ===== Modal: abrir e fechar (clicando fora) =====
  (function(){
    const modal = document.getElementById('modal');
    const abrir = document.getElementById('abrirModal');
    if (!modal) return;

    const conteudo = modal.querySelector('.modal-content');

    function abrirModal() {
      modal.classList.remove('hidden');
      modal.setAttribute('aria-hidden', 'false');
    }
    function fecharModal() {
      modal.classList.add('hidden');
      modal.setAttribute('aria-hidden', 'true');
    }

    abrir?.addEventListener('click', abrirModal);

    modal.addEventListener('click', (e) => {
      if (e.target === modal) fecharModal();
    });

    conteudo?.addEventListener('click', (e) => e.stopPropagation());

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !modal.classList.contains('hidden')) fecharModal();
    });
  })();

  // ====== Entre em contato conosco: envio via FormSubmit (AJAX) ======
  (function(){
    const form = document.getElementById("form-contato");
    const mensagem = document.getElementById("mensagem-sucesso");
    if (!form) return;

    // botão submit
    const submitBtn =
      form.querySelector('button[type="submit"]') ||
      form.querySelector('input[type="submit"]');

    function setSending(isSending) {
      if (!submitBtn) return;
      submitBtn.disabled = !!isSending;
      if (submitBtn.tagName.toLowerCase() === "button") {
        submitBtn.dataset._txt = submitBtn.dataset._txt || submitBtn.textContent;
        submitBtn.textContent = isSending ? "Enviando..." : submitBtn.dataset._txt;
      }
    }

    function showSuccess() {
      if (!mensagem) return;
      mensagem.style.display = "block";
      setTimeout(() => (mensagem.style.display = "none"), 5000);
    }

    function isValidEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(email || "").trim());
    }

    form.addEventListener("submit", async (e) => {
      // Se o JS está rodando, a gente intercepta e faz AJAX.
      // Se NÃO estiver rodando (domínio com arquivo velho/cache), o HTML action/method já resolve por fallback.
      e.preventDefault();

      // Honeypot
      const honey = form.querySelector('input[name="_honey"]');
      if (honey && honey.value.trim()) return;

      const nome  = form.querySelector('[name="nome"]')?.value?.trim() || "";
      const email = form.querySelector('[name="email"]')?.value?.trim() || "";
      const telefone = form.querySelector('[name="telefone"]')?.value?.trim() || "";

      if (!nome || !email || !telefone) {
        alert("Preencha Nome, E-mail e Telefone.");
        return;
      }
      if (!isValidEmail(email)) {
        alert("E-mail inválido.");
        return;
      }

      // Garante cabeçalhos úteis no e-mail
      const formData = new FormData(form);
      if (!formData.has("_replyto")) formData.append("_replyto", email);
      formData.set("_subject", `Novo contato — ${nome}`);
      formData.set("_captcha", "false");
      formData.set("_template", "table");

      setSending(true);

      try {
        const response = await fetch("https://formsubmit.co/ajax/arcardapio@gmail.com", {
          method: "POST",
          headers: { "Accept": "application/json" },
          body: formData
        });

        const json = await response.json().catch(() => null);

        if (!response.ok || !json || (json.success !== true && json.success !== "true")) {
          console.error("[FORM] status:", response.status, response.statusText, json);
          alert("Erro ao enviar o formulário. Veja o console (F12).");
          return;
        }

        form.reset();
        showSuccess();
      } catch (error) {
        console.error("[FORM] erro:", error);
        alert("Erro de rede. Verifique sua conexão.");
      } finally {
        setSending(false);
      }
    });
  })();
</script>

</body>
</html>
