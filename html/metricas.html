<!-- metricas.html -->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ARCard√°pio ‚Äî Dashboard de M√©tricas</title>

  <!-- Estilos principais -->
  <link rel="stylesheet" href="../css/metricas.css" />

  <!-- Ajustes m√≠nimos de estilo locais -->
  <style>
    /* Barrinha gradiente no hover do KPI */
    .kpi-card::before {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--color-accent), var(--color-info));
      opacity: 0;
      transition: opacity var(--transition-base);
    }
    .kpi-card:hover::before { opacity: 1; }

    /* T√≠tulo das se√ß√µes preparado para o bot√£o (?) */
    .section-header .section-title{
      display: inline-flex;
      align-items: center;
      gap: .5rem;
    }
  </style>

  <!-- Flatpickr (calend√°rios em PT-BR) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script defer src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/pt.js"></script>

  <meta name="description" content="Painel de m√©tricas do ARCard√°pio: escaneamento por mesa/QRCode, sess√µes, tempo no card√°pio, picos de acesso, uso do bot√£o Info e modelos em AR." />
</head>
<body>
  <!-- NAVBAR -->
  <header class="navbar" role="banner">
    <div class="navbar-container">
      <div class="navbar-brand">
        <h1>ARCard√°pio</h1>
        <span class="subtitle">Dashboard de M√©tricas</span>
      </div>
      <nav class="navbar-nav" aria-label="Navega√ß√£o principal">
        <a href="../html/home.html" class="nav-link">‚Üê Voltar para Home</a>
      </nav>
    </div>
  </header>

  <!-- CONTE√öDO PRINCIPAL -->
  <main class="main-container" role="main">

    <!-- ===== FILTROS ===== -->
    <section class="filters-section" aria-labelledby="titulo-filtros">
      <h2 id="titulo-filtros" class="section-title">Filtros</h2>

      <div class="filters-grid">
        <div class="filters-group">
          <label class="filter-label" for="periodFilter">Per√≠odo r√°pido:</label>
          <select id="periodFilter" class="filter-select">
            <option value="custom" selected>PER√çODO</option>
            <option value="7d">7 √öLTIMOS DIAS</option>
            <option value="15d">15 √öLTIMOS DIAS</option>
            <option value="30d">30 √öLTIMOS DIAS</option>
            <option value="60d">60 √öLTIMOS DIAS</option>
            <option value="mesAnterior">M√äS ANTERIOR</option>
            <option value="mesAtual">M√äS ATUAL</option>
          </select>
        </div>

        <div class="filters-group">
          <label class="filter-label" for="startDate">Data inicial</label>
          <input id="startDate" type="text" class="filter-input date-input" placeholder="dd/mm/aaaa" inputmode="numeric" autocomplete="off"/>
        </div>

        <div class="filters-group">
          <label class="filter-label" for="endDate">Data final</label>
          <input id="endDate" type="text" class="filter-input date-input" placeholder="dd/mm/aaaa" inputmode="numeric" autocomplete="off"/>
        </div>

        <!-- Bot√µes -->
        <button id="btnApplyFilters" type="button" class="btn btn-primary">APLICAR FILTROS</button>
        <button id="clearRange" type="button" class="btn btn-secondary">LIMPAR</button>

        <!-- Campo extra usado pelo JS (se precisar exibir "dd/mm/aaaa a dd/mm/aaaa") -->
        <input id="filterRange" type="text" style="display:none;" aria-hidden="true" />
      </div>
    </section>

    <!-- ========= RESUMO (KPIs) ========= -->
    <section class="kpis-section" aria-labelledby="titulo-resumo">
      <h2 id="titulo-resumo" class="section-title">Resumo</h2>

      <!-- Linha 1 de KPIs -->
      <div class="kpis-grid">
        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Total de Scans de QR
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Soma de todas as leituras de QR Codes no per√≠odo selecionado.">?</button>
            </h3>
            <span class="kpi-icon" aria-hidden="true">üìä</span>
          </div>
          <p id="kpiScans" class="kpi-value">--</p>
          <span id="kpiTotalScansDelta" class="kpi-change">‚Äî</span>
        </article>

        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Sess√µes
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Quantidade total de sess√µes no per√≠odo.">?</button>
            </h3>
            <span class="kpi-icon" aria-hidden="true">üë•</span>
          </div>
          <p id="kpiSessoes" class="kpi-value">--</p>
          <span id="kpiSessionsUniqueDelta" class="kpi-change">‚Äî</span>
        </article>

        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Usu√°rios √önicos
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Dispositivos ou navegadores distintos identificados no per√≠odo.">?</button>
            </h3>
            <span class="kpi-icon" aria-hidden="true">üßë‚Äçü§ù‚Äçüßë</span>
          </div>
          <p id="kpiUnicos" class="kpi-value">--</p>
          <span id="kpiUsersUniqueDelta" class="kpi-change">‚Äî</span>
        </article>

        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Taxa de Info
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Percentual de cliques no bot√£o de Informa√ß√µes em rela√ß√£o aos scans.">?</button>
            </h3>
            <span class="kpi-icon" aria-hidden="true">‚ÑπÔ∏è</span>
          </div>
          <p id="kpiInfoRate" class="kpi-value">--</p>
          <span id="kpiInfoRateDelta" class="kpi-change">‚Äî</span>
        </article>
      </div>

      <!-- Linha 2 de KPIs -->
      <div class="kpis-grid">
        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Tempo M√©dio por Item
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Tempo m√©dio de perman√™ncia em cada item visualizado.">?</button>
            </h3>
            <span class="kpi-icon">üçï</span>
          </div>
          <p id="kpiAvgTimePerItem" class="kpi-value">--</p>
        </article>

        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Tempo M√©dio por Categoria
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Tempo m√©dio dentro de cada categoria do card√°pio.">?</button>
            </h3>
            <span class="kpi-icon">üóÇÔ∏è</span>
          </div>
          <p id="kpiAvgTimePerCategory" class="kpi-value">--</p>
        </article>

        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Cliques no Info
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Total de aberturas do painel de informa√ß√µes dos itens.">?</button>
            </h3>
            <span class="kpi-icon">‚ÑπÔ∏è</span>
          </div>
          <p id="kpiInfoClicks" class="kpi-value">--</p>
        </article>

        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Tempo M√©dio de Leitura
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Tempo m√©dio gasto lendo as informa√ß√µes dos itens.">?</button>
            </h3>
            <span class="kpi-icon">‚è±Ô∏è</span>
          </div>
          <p id="kpiInfoAvgTime" class="kpi-value">--</p>
        </article>

        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Clientes Ativos
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Restaurantes com plano ativo e uso registrado no per√≠odo.">?</button>
            </h3>
            <span class="kpi-icon">üî•</span>
          </div>
          <p id="kpiActiveClients" class="kpi-value">--</p>
        </article>

        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Novos Clientes
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Novos restaurantes que come√ßaram a usar o sistema no per√≠odo.">?</button>
            </h3>
            <span class="kpi-icon">üÜï</span>
          </div>
          <p id="kpiNewClients" class="kpi-value">--</p>
        </article>

        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Clientes Recorrentes
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Usu√°rios finais que voltaram a acessar o card√°pio no per√≠odo.">?</button>
            </h3>
            <span class="kpi-icon">üîÅ</span>
          </div>
          <p id="kpiRecurringClients" class="kpi-value">--</p>
        </article>

        <article class="kpi-card">
          <div class="kpi-header">
            <h3 class="kpi-title">
              Taxa de Retorno
              <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Percentual de clientes retornantes sobre o total de clientes (novos + recorrentes).">?</button>
            </h3>
            <span class="kpi-icon">üìà</span>
          </div>
          <p id="kpiReturnRate" class="kpi-value">--</p>
        </article>
      </div>
    </section>

    <!-- ===== GRADE PRINCIPAL ===== -->
    <div class="dashboard-grid">

      <!-- Escaneamento Total de QR Code -->
      <section class="chart-section col-12" aria-labelledby="titulo-scans-geral">
        <div class="section-header">
          <h2 id="titulo-scans-geral" class="section-title">
            Escaneamento Total de QR Code
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Soma di√°ria de todas as leituras de QR Codes no per√≠odo selecionado.">?</button>
          </h2>
          <span class="section-subtitle">
            Representa o total de vezes que os QR Codes foram escaneados dentro do per√≠odo selecionado.
            Cada ponto no gr√°fico indica a quantidade de leituras feitas naquele dia.
          </span>
        </div>

        <div class="chart-container">
          <canvas id="chartScansTotal" aria-label="Gr√°fico de escaneamentos por dia"></canvas>
        </div>
      </section>

      <!-- Scans por Mesa/QR -->
      <section class="chart-section col-4" aria-labelledby="titulo-escaneamento-mesa">
        <div class="chart-header is-inline-help">
          <h2 id="titulo-escaneamento-mesa" class="section-title">
            Escaneamento por Mesa/QRCode
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Distribui√ß√£o dos scans por mesa/QR no per√≠odo; a tabela mostra participa√ß√£o e √∫ltimo scan.">?</button>
          </h2>
        </div>

        <div class="chart-container chart-container--stacked">
          <div class="chart-container__canvas">
            <canvas id="chartScansByMesa" aria-label="Gr√°fico de scans por mesa"></canvas>
          </div>

          <div class="chart-container__table" role="region" aria-label="Tabela de scans por mesa">
            <table class="data-table">
              <thead>
                <tr>
                  <th scope="col">Mesa</th>
                  <th scope="col">Per√≠odo</th>
                  <th scope="col">√öltimo Scan</th>
                  <th scope="col">% do Total</th>
                </tr>
              </thead>
              <tbody id="tbodyMesaQR">
                <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- Sess√µes por per√≠odo -->
      <section class="chart-section col-4" aria-labelledby="titulo-sessoes">
        <div class="section-header">
          <h2 id="titulo-sessoes" class="section-title">
            Sess√µes por Per√≠odo
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="N√∫mero de sess√µes ao longo do tempo; √∫til para medir tend√™ncia e engajamento.">?</button>
          </h2>
          <span class="section-subtitle">Tend√™ncia e engajamento</span>
        </div>

        <div class="chart-container">
          <canvas id="chartSessoes" aria-label="Gr√°fico de sess√µes"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de sess√µes">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Per√≠odo</th>
                <th scope="col">Sess√µes</th>
                <th scope="col">Usu√°rios √önicos</th>
                <th scope="col">Sess√µes/Usu√°rio</th>
              </tr>
            </thead>
            <tbody id="tbodySessoes">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Tempo m√©dio no card√°pio -->
      <section class="chart-section col-4" aria-labelledby="titulo-tempo-menu">
        <div class="section-header">
          <h2 id="titulo-tempo-menu" class="section-title">
            Tempo M√©dio (Card√°pio)
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Dura√ß√£o m√©dia das sess√µes no card√°pio (sem AR) durante o per√≠odo.">?</button>
          </h2>
          <span class="section-subtitle">Dura√ß√£o de perman√™ncia</span>
        </div>

        <div class="chart-container">
          <canvas id="chartAvgTimeMenu" aria-label="Gr√°fico de tempo m√©dio no card√°pio"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de tempo m√©dio no card√°pio">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Per√≠odo</th>
                <th scope="col">Tempo M√©dio</th>
                <th scope="col">Mediana</th>
                <th scope="col">Amostras</th>
              </tr>
            </thead>
            <tbody id="tableAvgTimeMenu">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Hor√°rio de pico -->
      <section class="chart-section col-4" aria-labelledby="titulo-horario-pico">
        <div class="section-header">
          <h2 id="titulo-horario-pico" class="section-title">
            Hor√°rio de Pico
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Faixas hor√°rias mais movimentadas por m√™s e dia da semana.">?</button>
          </h2>
          <span class="section-subtitle">Uso por hora/dia/m√™s</span>
        </div>

        <div class="chart-container">
          <canvas id="chartPeakHours" aria-label="Gr√°fico de hor√°rios de pico"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de hor√°rios de pico">
          <table class="tbl-metric" aria-label="Hor√°rio de Pico">
            <colgroup>
              <col class="col-date" />
              <col class="col-hour" />
              <col class="col-scans" />
            </colgroup>
            <thead>
              <tr>
                <th>Data</th>
                <th>Hora</th>
                <th>Scans</th>
              </tr>
            </thead>
            <tbody id="tablePeakHours">
              <tr><td colspan="3" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Uso do bot√£o Info -->
      <section class="chart-section col-4" aria-labelledby="titulo-info">
        <div class="section-header">
          <h2 id="titulo-info" class="section-title">
            Uso do bot√£o "Info"
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Evolu√ß√£o de aberturas do painel de informa√ß√µes e tempo m√©dio de leitura.">?</button>
          </h2>
          <span class="section-subtitle">Aberturas e tempo</span>
        </div>

        <div class="kpis-grid">
          <article class="kpi-card">
            <div class="kpi-header">
              <h3 class="kpi-title">
                Aberturas
                <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="N√∫mero de vezes que o painel de informa√ß√µes dos itens foi aberto.">?</button>
              </h3>
              <span class="kpi-icon" aria-hidden="true">‚ÑπÔ∏è</span>
            </div>
            <p id="kpiInfoOpens" class="kpi-value">--</p>
          </article>
          <article class="kpi-card">
            <div class="kpi-header">
              <h3 class="kpi-title">
                Tempo M√©dio
                <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Tempo m√©dio que os usu√°rios passaram lendo as informa√ß√µes.">?</button>
              </h3>
              <span class="kpi-icon" aria-hidden="true">‚è±Ô∏è</span>
            </div>
            <p id="kpiInfoAvgTimeInfoBox" class="kpi-value">--</p>
          </article>
        </div>

        <div class="chart-container" style="margin-top: var(--spacing-lg);">
          <canvas id="chartInfoUsage" aria-label="Gr√°fico de uso do bot√£o Info"></canvas>
        </div>
      </section>

      <!-- Tempo por item -->
      <section class="chart-section col-4" aria-labelledby="titulo-tempo-item">
        <div class="section-header">
          <h2 id="titulo-tempo-item" class="section-title">
            Tempo por Item
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Tempo m√©dio (dwell time) por produto visualizado no card√°pio.">?</button>
          </h2>
          <span class="section-subtitle">Dwell time por produto</span>
        </div>

        <div class="chart-container">
          <canvas id="chartTimePerItem" aria-label="Gr√°fico de tempo por item"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de tempo por item">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Item</th>
                <th scope="col">Tempo M√©dio</th>
                <th scope="col">Visualiza√ß√µes</th>
                <th scope="col">% do Total</th>
              </tr>
            </thead>
            <tbody id="tableTimePerItem">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Itens mais visualizados -->
      <section class="chart-section col-4" aria-labelledby="titulo-itens-mais-vistos">
        <div class="section-header">
          <h2 id="titulo-itens-mais-vistos" class="section-title">
            Itens mais visualizados
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Top de itens com maior n√∫mero de visualiza√ß√µes no per√≠odo.">?</button>
          </h2>
          <span class="section-subtitle">Top 10 de interesse</span>
        </div>

        <div class="chart-container">
          <canvas id="chartTopItems" aria-label="Gr√°fico de itens mais visualizados"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de itens mais visualizados">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Item</th>
                <th scope="col">Visualiza√ß√µes</th>
                <th scope="col">Tempo M√©dio</th>
                <th scope="col">Categoria</th>
              </tr>
            </thead>
            <tbody id="tableTopItems">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Tempo por Categoria -->
      <section class="chart-section col-6" aria-labelledby="titulo-tempo-categoria">
        <div class="section-header">
          <h2 id="titulo-tempo-categoria" class="section-title">
            Tempo por Categoria
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Tempo m√©dio de perman√™ncia por categoria (dwell time).">?</button>
          </h2>
          <span class="section-subtitle">Tempo m√©dio de perman√™ncia</span>
        </div>

        <div class="chart-container">
          <canvas id="chartTimeByCategory" aria-label="Gr√°fico de tempo por categoria"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de tempo por categoria">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Categoria</th>
                <th scope="col">Tempo M√©dio</th>
                <th scope="col">Sess√µes</th>
                <th scope="col">% do Tempo</th>
              </tr>
            </thead>
            <tbody id="tbodyTimeByCategory">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Categorias mais acessadas -->
      <section class="chart-section col-6" aria-labelledby="titulo-categorias-mais">
        <div class="section-header">
          <h2 id="titulo-categorias-mais" class="section-title">
            Categorias mais acessadas
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Categorias com maior volume de cliques de acesso no per√≠odo.">?</button>
          </h2>
          <span class="section-subtitle">Popularidade por cliques</span>
        </div>

        <div class="chart-container">
          <canvas id="chartCategoryPopularity" aria-label="Gr√°fico de categorias mais acessadas"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de categorias mais acessadas">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Categoria</th>
                <th scope="col">Cliques</th>
                <th scope="col">Tempo M√©dio</th>
                <th scope="col">% do Total</th>
              </tr>
            </thead>
            <tbody id="tableCategoryPopularity">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Bot√£o Info (por item) -->
      <section class="chart-section col-4" aria-labelledby="titulo-info-por-item">
        <div class="section-header">
          <h2 id="titulo-info-por-item" class="section-title">
            Botao Info
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Cliques no bot√£o Info por item e tempo m√©dio de leitura correspondente.">?</button>
          </h2>
          <span class="section-subtitle">Curiosidade e leitura</span>
        </div>

        <div class="chart-container">
          <canvas id="chartInfoPerItem" aria-label="Gr√°fico de Info por item"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de Info por item">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Item</th>
                <th scope="col">CliquesInfo </th>
                <th scope="col">Tempo M√©dio (Info)</th>
                <th scope="col">Visualiza√ß√µes</th>
              </tr>
            </thead>
            <tbody id="tableInfoPerItem">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Recorr√™ncia -->
      <section class="chart-section col-4" aria-labelledby="titulo-recorrencia">
        <div class="section-header">
          <h2 id="titulo-recorrencia" class="section-title">
            Recorr√™ncia de Clientes
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Comparativo entre clientes novos e retornantes; calcula tamb√©m a taxa de retorno.">?</button>
          </h2>
          <span class="section-subtitle">Novos x Retornando</span>
        </div>

        <div class="kpis-grid">
          <article class="kpi-card">
            <div class="kpi-header">
              <h3 class="kpi-title">
                Novos
                <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Clientes (usu√°rios finais) identificados pela primeira vez no per√≠odo.">?</button>
              </h3>
              <span class="kpi-icon">üÜï</span>
            </div>
            <p id="kpiRecNew" class="kpi-value">--</p>
          </article>
          <article class="kpi-card">
            <div class="kpi-header">
              <h3 class="kpi-title">
                Retornando
                <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Clientes que j√° haviam acessado antes e voltaram no per√≠odo.">?</button>
              </h3>
              <span class="kpi-icon">üîÅ</span>
            </div>
            <p id="kpiRecReturning" class="kpi-value">--</p>
          </article>
          <article class="kpi-card">
            <div class="kpi-header">
              <h3 class="kpi-title">
                % Retorno
                <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="(Retornando / Total de clientes no per√≠odo) √ó 100.">?</button>
              </h3>
              <span class="kpi-icon">üìà</span>
            </div>
            <p id="kpiRecRate" class="kpi-value">--</p>
          </article>
        </div>

        <div class="chart-container" style="margin-top: var(--spacing-lg);">
          <canvas id="chartRecurrence" aria-label="Gr√°fico de recorr√™ncia"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de recorr√™ncia">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Cliente (an√¥nimo)</th>
                <th scope="col">Scans</th>
                <th scope="col">√öltimo Scan</th>
                <th scope="col">Dias desde o √∫ltimo</th>
              </tr>
            </thead>
            <tbody id="tableRecurrence">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Engajamento por mesa -->
      <section class="chart-section col-4" aria-labelledby="titulo-engajamento-mesa">
        <div class="section-header">
          <h2 id="titulo-engajamento-mesa" class="section-title">
            Engajamento por Mesa
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Tempo m√©dio e intera√ß√µes por sess√£o para cada mesa/QR.">?</button>
          </h2>
          <span class="section-subtitle">Tempo e intera√ß√µes</span>
        </div>

        <div class="chart-container">
          <canvas id="chartEngagementByMesa" aria-label="Gr√°fico de engajamento por mesa"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de engajamento por mesa">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Mesa/QR</th>
                <th scope="col">Tempo M√©dio</th>
                <th scope="col">Intera√ß√µes/Sess√£o</th>
                <th scope="col">Sess√µes</th>
              </tr>
            </thead>
            <tbody id="tableEngagementByMesa">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Distribui√ß√£o por dispositivo -->
      <section class="chart-section col-4" aria-labelledby="titulo-dispositivos">
        <div class="section-header">
          <h2 id="titulo-dispositivos" class="section-title">
            Dispositivo Usados
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Percentual de sess√µes por tipo de dispositivo (celular, tablet, etc.).">?</button>
          </h2>
          <span class="section-subtitle">Celular, tablet e outros</span>
        </div>

        <div class="chart-container">
          <canvas id="chartDevices" aria-label="Gr√°fico de distribui√ß√£o por dispositivo"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de dispositivos">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Dispositivo</th>
                <th scope="col">Percentual</th>
                <th scope="col">Sess√µes</th>
                <th scope="col">Tempo M√©dio</th>
              </tr>
            </thead>
            <tbody id="tableDeviceDistribution">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Modelos mais exibidos -->
      <section class="chart-section col-4" aria-labelledby="titulo-modelos">
        <div class="section-header">
          <h2 id="titulo-modelos" class="section-title">
            Modelos mais exibidos
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Itens com maior n√∫mero de exibi√ß√µes no modo AR.">?</button>
          </h2>
          <span class="section-subtitle">Top 5 + vis√£o geral</span>
        </div>

        <div class="chart-container">
          <canvas id="chartTopModels" aria-label="Gr√°fico top modelos AR"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela top modelos AR">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Item</th>
                <th scope="col">Exibi√ß√µes</th>
                <th scope="col">Tempo M√©dio</th>
                <th scope="col">Erros</th>
              </tr>
            </thead>
            <tbody id="tableTopModels">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Sa√∫de dos modelos -->
      <section class="chart-section col-4" aria-labelledby="titulo-model-health">
        <div class="section-header">
          <h2 id="titulo-model-health" class="section-title">
            Sa√∫de dos Modelos
            <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Rela√ß√£o de modelos carregados com sucesso versus ocorr√™ncias de erro.">?</button>
          </h2>
          <span class="section-subtitle">Carregados vs Erros</span>
        </div>

        <div class="kpis-grid">
          <article class="kpi-card">
            <div class="kpi-header">
              <h3 class="kpi-title">
                Carregados
                <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Quantidade de modelos 3D carregados com sucesso.">?</button>
              </h3>
              <span class="kpi-icon">‚úÖ</span>
            </div>
            <p id="kpiModelsLoaded" class="kpi-value">--</p>
          </article>
          <article class="kpi-card">
            <div class="kpi-header">
              <h3 class="kpi-title">
                Erros
                <button class="kpi-help" aria-label="O que √© isso?" data-tooltip="Quantidade de falhas ao carregar modelos 3D.">?</button>
              </h3>
              <span class="kpi-icon">‚ö†Ô∏è</span>
            </div>
            <p id="kpiModelsErrors" class="kpi-value">--</p>
          </article>
        </div>

        <div class="chart-container" style="margin-top: var(--spacing-lg);">
          <canvas id="chartModelHealth" aria-label="Gr√°fico de sa√∫de dos modelos"></canvas>
        </div>

        <div class="table-wrapper" role="region" aria-label="Tabela de erros de modelo">
          <table class="data-table">
            <thead>
              <tr>
                <th scope="col">Item</th>
                <th scope="col">Erro</th>
                <th scope="col">Ocorr√™ncias</th>
                <th scope="col">√öltimo</th>
              </tr>
            </thead>
            <tbody id="tableModelErrors">
              <tr><td colspan="4" class="text-center">Carregando‚Ä¶</td></tr>
            </tbody>
          </table>
        </div>
      </section>

    </div><!-- /dashboard-grid -->

    <!-- ===== INSIGHTS ===== -->
    <section class="insights-section" aria-labelledby="titulo-insights">
      <h2 id="titulo-insights" class="section-title">
        Insights
        <button class="kpi-help" data-tooltip="Aqui s√£o exibidas observa√ß√µes autom√°ticas geradas a partir dos dados do restaurante.">
          ?
        </button>
      </h2>

      <ul id="insightsList" class="insights-list">
        <li>Carregando‚Ä¶</li>
      </ul>
    </section>

  </main>

  <!-- RODAP√â -->
  <footer class="footer" role="contentinfo">
    <p>¬© 2025 ARCard√°pio ‚Äî Painel do Cliente</p>
  </footer>

  <noscript>Ative o JavaScript para visualizar gr√°ficos e dados.</noscript>

  <!-- Script de m√©tricas (dados e gr√°ficos) -->
  <script src="../java/metricas.js?v=4"></script>
</body>
</html>
